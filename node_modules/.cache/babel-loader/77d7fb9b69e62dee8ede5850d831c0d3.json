{"ast":null,"code":"var _jsxFileName = \"/Users/johnloberger/Flatiron/code/mod5/frontend/src/components/MoreDetails.js\";\nimport React, { Component } from \"react\";\nimport { InfoWindow, GoogleApiWrapper } from 'google-maps-react';\nexport class MoreDetails extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      lat: false,\n      lng: '',\n      data: false\n    };\n\n    this.renderNo2 = () => {\n      if (this.state.data !== false && this.state.data.iaqi.hasOwnProperty('no2')) {\n        return /*#__PURE__*/React.createElement(\"p\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 27,\n            columnNumber: 14\n          }\n        }, this.state.data.iaqi.no2.v);\n      } else {\n        return /*#__PURE__*/React.createElement(\"p\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 29,\n            columnNumber: 14\n          }\n        }, \"-\");\n      }\n    };\n\n    this.fetchData = () => {\n      if (this.state.lat) {\n        console.log('working!');\n        fetch(`https://api.waqi.info/feed/geo:${this.state.lat};${this.state.lng}/?token=87b2bba6a5b2e26c577ffc48e297eaed82a8408c`).then(resp => resp.json()).then(data => {\n          this.setState({\n            data: data.data\n          });\n        });\n      } else {\n        return null;\n      }\n    };\n  }\n\n  componentDidMount() {\n    this.interval = setInterval(() => this.setState({\n      time: Date.now()\n    }), 500);\n  }\n\n  componentWillUnmount() {\n    clearInterval(this.interval);\n  }\n\n  render() {\n    this.fetchData();\n    console.log(this.state);\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 12\n      }\n    }, this.renderNo2());\n  }\n\n}\nexport default MoreDetails;","map":{"version":3,"sources":["/Users/johnloberger/Flatiron/code/mod5/frontend/src/components/MoreDetails.js"],"names":["React","Component","InfoWindow","GoogleApiWrapper","MoreDetails","state","lat","lng","data","renderNo2","iaqi","hasOwnProperty","no2","v","fetchData","console","log","fetch","then","resp","json","setState","componentDidMount","interval","setInterval","time","Date","now","componentWillUnmount","clearInterval","render"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAAQC,UAAR,EAAoBC,gBAApB,QAA2C,mBAA3C;AAIA,OAAO,MAAMC,WAAN,SAA0BH,SAA1B,CAAoC;AAAA;AAAA;AAAA,SAGzCI,KAHyC,GAGnC;AACJC,MAAAA,GAAG,EAAE,KADD;AAEJC,MAAAA,GAAG,EAAE,EAFD;AAGJC,MAAAA,IAAI,EAAE;AAHF,KAHmC;;AAAA,SAmBzCC,SAnByC,GAmB7B,MAAM;AAChB,UAAI,KAAKJ,KAAL,CAAWG,IAAX,KAAoB,KAApB,IAA6B,KAAKH,KAAL,CAAWG,IAAX,CAAgBE,IAAhB,CAAqBC,cAArB,CAAoC,KAApC,CAAjC,EAA4E;AAC1E,4BAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAAI,KAAKN,KAAL,CAAWG,IAAX,CAAgBE,IAAhB,CAAqBE,GAArB,CAAyBC,CAA7B,CAAP;AACD,OAFD,MAEO;AACL,4BAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eAAP;AACD;AACF,KAzBwC;;AAAA,SA2BzCC,SA3ByC,GA2B7B,MAAM;AAChB,UAAI,KAAKT,KAAL,CAAWC,GAAf,EAAmB;AACjBS,QAAAA,OAAO,CAACC,GAAR,CAAY,UAAZ;AACAC,QAAAA,KAAK,CAAE,kCAAiC,KAAKZ,KAAL,CAAWC,GAAI,IAAG,KAAKD,KAAL,CAAWE,GAAI,kDAApE,CAAL,CACCW,IADD,CACMC,IAAI,IAAIA,IAAI,CAACC,IAAL,EADd,EAECF,IAFD,CAEMV,IAAI,IAAI;AACZ,eAAKa,QAAL,CAAc;AACZb,YAAAA,IAAI,EAAEA,IAAI,CAACA;AADC,WAAd;AAGD,SAND;AAOD,OATD,MASO;AACL,eAAO,IAAP;AACD;AACF,KAxCwC;AAAA;;AASzCc,EAAAA,iBAAiB,GAAE;AAEb,SAAKC,QAAL,GAAgBC,WAAW,CAAC,MAAM,KAAKH,QAAL,CAAc;AAAEI,MAAAA,IAAI,EAAEC,IAAI,CAACC,GAAL;AAAR,KAAd,CAAP,EAA4C,GAA5C,CAA3B;AAEH;;AAEHC,EAAAA,oBAAoB,GAAG;AACrBC,IAAAA,aAAa,CAAC,KAAKN,QAAN,CAAb;AACD;;AAyBDO,EAAAA,MAAM,GAAE;AACN,SAAKhB,SAAL;AACAC,IAAAA,OAAO,CAACC,GAAR,CAAY,KAAKX,KAAjB;AACA,wBAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAEJ,KAAKI,SAAL,EAFI,CAAP;AAID;;AAjDwC;AAsD3C,eAAeL,WAAf","sourcesContent":["import React, { Component } from \"react\";\nimport {InfoWindow, GoogleApiWrapper} from 'google-maps-react';\n\n\n\nexport class MoreDetails extends Component {\n\n\n  state={\n    lat: false,\n    lng: '',\n    data: false\n  }\n\n  componentDidMount(){\n   \n        this.interval = setInterval(() => this.setState({ time: Date.now() }), 500);\n\n    }\n\n  componentWillUnmount() {\n    clearInterval(this.interval);\n  }\n\n  renderNo2 = () => {\n    if (this.state.data !== false && this.state.data.iaqi.hasOwnProperty('no2')){\n      return <p>{this.state.data.iaqi.no2.v}</p>\n    } else {\n      return <p>-</p>\n    }\n  }\n  \n  fetchData = () => {\n    if (this.state.lat){\n      console.log('working!')\n      fetch(`https://api.waqi.info/feed/geo:${this.state.lat};${this.state.lng}/?token=87b2bba6a5b2e26c577ffc48e297eaed82a8408c`)\n      .then(resp => resp.json())\n      .then(data => {\n        this.setState({\n          data: data.data\n        })\n      })\n    } else {\n      return null\n    }\n  }\n\n  render(){\n    this.fetchData()\n    console.log(this.state)\n    return <div>\n      {/* {this.state.data ? this.state.data.iaqi.dew.v : <p>-</p>} */}\n      {this.renderNo2()}\n    </div>\n  }\n}\n\n\n\nexport default MoreDetails"]},"metadata":{},"sourceType":"module"}