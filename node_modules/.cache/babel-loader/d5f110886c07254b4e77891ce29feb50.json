{"ast":null,"code":"var _jsxFileName = \"/Users/johnloberger/Flatiron/code/mod5/MyClimateFrontend/src/components/NewsFeed.js\";\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport { fetchLocationsSuccess } from '../actions/location';\nimport { fetchStatSuccess } from '../actions/stat';\nimport { fetchCitiesSuccess } from '../actions/city';\nimport { currentUser } from '../actions/auth';\nimport ClimateMap from './ClimateMap';\nimport Geocode from \"react-geocode\";\nimport climScores from './climScores.json';\nimport NewsCard from './NewsCard';\nimport Grid from '@material-ui/core/Grid';\n\nclass NewsFeed extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      newsArticles: []\n    };\n  }\n\n  componentDidMount() {\n    const token = localStorage.getItem('token');\n    console.log(token);\n\n    if (!token) {\n      this.props.history.push('/login');\n    } else {\n      const reqObj = {\n        method: 'GET',\n        headers: {\n          'Authorization': `Bearer ${token}`\n        }\n      };\n      fetch('http://localhost:3001/current_user', reqObj).then(resp => resp.json()).then(data => {\n        console.log(data);\n        this.props.currentUser(data);\n      });\n      fetch('https://newsapi.org/v2/everything?q=climate%20change&apiKey=cdcfd508f0a3409cb71b20f0d5bba38e').then(resp => resp.json()).then(news => {\n        console.log(news.articles);\n        this.setState({\n          newsArticles: news.articles\n        });\n      });\n    }\n  }\n\n  render() {\n    const one3rd = this.state.newsArticles.length / 3;\n    const first3rd = this.state.newsArticles.slice[(0, 5)];\n    console.log(first3rd);\n    console.log(this.state.newsArticles[(0, 3)]);\n    return this.state.newsArticles.map(article => {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 55,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(Grid, {\n        container: true,\n        direction: \"row\",\n        justify: \"center\",\n        alignItems: \"flex-start\",\n        spacing: 0,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 56,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(Grid, {\n        item: true,\n        xs: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"h1\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 13\n        }\n      }, article.title)), /*#__PURE__*/React.createElement(Grid, {\n        item: true,\n        xs: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 13\n        }\n      }, article.title), /*#__PURE__*/React.createElement(Grid, {\n        item: true,\n        xs: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(NewsCard, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 13\n        }\n      }))));\n    });\n  }\n\n}\n\nconst mapStateToProps = state => {\n  return {\n    auth: state.auth,\n    current_user: state.currentUser\n  };\n};\n\nconst mapDispatchToProps = {\n  currentUser\n};\nexport default connect(mapStateToProps, mapDispatchToProps)(NewsFeed);","map":{"version":3,"sources":["/Users/johnloberger/Flatiron/code/mod5/MyClimateFrontend/src/components/NewsFeed.js"],"names":["React","connect","fetchLocationsSuccess","fetchStatSuccess","fetchCitiesSuccess","currentUser","ClimateMap","Geocode","climScores","NewsCard","Grid","NewsFeed","Component","state","newsArticles","componentDidMount","token","localStorage","getItem","console","log","props","history","push","reqObj","method","headers","fetch","then","resp","json","data","news","articles","setState","render","one3rd","length","first3rd","slice","map","article","title","mapStateToProps","auth","current_user","mapDispatchToProps"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { connect } from 'react-redux'\nimport { fetchLocationsSuccess } from '../actions/location'\nimport { fetchStatSuccess } from '../actions/stat'\nimport { fetchCitiesSuccess } from '../actions/city'\nimport { currentUser } from '../actions/auth'\nimport ClimateMap from './ClimateMap'\nimport Geocode from \"react-geocode\";\nimport climScores from './climScores.json'\nimport NewsCard from './NewsCard';\nimport Grid from '@material-ui/core/Grid';\n\nclass NewsFeed extends React.Component {\n\n  state = {\n    newsArticles: []\n  }\n  \n  componentDidMount(){\n    const token = localStorage.getItem('token')\n    console.log(token)\n    if (!token) {\n      this.props.history.push('/login')\n    } else {\n      const reqObj = {\n        method: 'GET',\n        headers: {\n          'Authorization': `Bearer ${token}`\n        }\n      }\n      fetch('http://localhost:3001/current_user', reqObj)\n      .then(resp => resp.json())\n      .then(data => {\n        console.log(data)\n        this.props.currentUser(data)\n      })\n      fetch('https://newsapi.org/v2/everything?q=climate%20change&apiKey=cdcfd508f0a3409cb71b20f0d5bba38e')  \n      .then(resp => resp.json())\n      .then(news => {\n        console.log(news.articles)\n        this.setState({\n          newsArticles: news.articles\n        })\n      })\n    }\n  }\n\n  render(){ \n    const one3rd = this.state.newsArticles.length / 3\n    const first3rd = this.state.newsArticles.slice[0, 5]\n    console.log(first3rd)\n    console.log(this.state.newsArticles[0,3])\n    return this.state.newsArticles.map((article)=>{\n      return (\n        <div>\n          <Grid\n            container\n            direction=\"row\"\n            justify=\"center\"\n            alignItems=\"flex-start\"\n            spacing={0}\n            >\n          <Grid item xs>\n            <h1>{article.title}</h1>\n            </Grid>\n            <Grid item xs>\n            {article.title}\n            </Grid>\n            <Grid item xs>\n            <NewsCard/>\n            </Grid>\n\n\n          </Grid>\n        </div>)\n    })\n  };\n}\n\nconst mapStateToProps = (state) => {\n  return {\n    auth: state.auth,\n    current_user: state.currentUser,\n  }\n}\n\nconst mapDispatchToProps = {\n  currentUser\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(NewsFeed);\n\n\n"]},"metadata":{},"sourceType":"module"}