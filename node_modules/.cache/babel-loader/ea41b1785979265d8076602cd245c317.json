{"ast":null,"code":"var _jsxFileName = \"/Users/johnloberger/Flatiron/code/mod5/frontend/src/components/Dashboard.js\";\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport { fetchUsersSuccess } from '../actions/user';\nimport { fetchStatSuccess } from '../actions/stat';\nimport { fetchCitiesSuccess } from '../actions/city';\nimport ClimateMap from './ClimateMap';\nimport cities from './cities.json';\nimport climScores from './climScores.json';\n\nclass Dashboard extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      climateScores: climScores,\n      stations: {}\n    };\n\n    this.fetchAllStats = () => {\n      this.props.stats.map(stat => {\n        fetch(`https://api.waqi.info/feed/geo:${stat.lat};${stat.lon}/?token=87b2bba6a5b2e26c577ffc48e297eaed82a8408c`).then(resp => resp.json()).then(data => console.log(data));\n      });\n    };\n  }\n\n  componentDidMount() {\n    fetch('http://localhost:3001/users').then(resp => resp.json()).then(data => {\n      this.props.fetchUsersSuccess(data);\n    });\n    fetch('https://api.waqi.info/map/bounds/?latlng=85,-180,-85.05115,180&token=87b2bba6a5b2e26c577ffc48e297eaed82a8408c').then(resp => resp.json()).then(stations => {\n      // this.setState({\n      //   stations: stations\n      // })\n      this.props.fetchStatSuccess(stations.data);\n    });\n    fetch('https://public.opendatasoft.com/api/records/1.0/search/?dataset=1000-largest-us-cities-by-population-with-geographic-coordinates&q=&rows=1000&sort=-rank&facet=city&facet=state').then(resp => resp.json()).then(cities => {\n      console.log(cities.records);\n      this.props.fetchCitiesSuccess(cities.records);\n    });\n  }\n\n  render() {\n    this.fetchAllStats();\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(ClimateMap, {\n      stations: this.props.stats,\n      cities: this.props.cities,\n      climateScores: this.state.climateScores,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 9\n      }\n    }));\n  }\n\n}\n\nconst mapStateToProps = state => {\n  return {\n    users: state.users,\n    stats: state.stats,\n    cities: state.cities\n  };\n};\n\nconst mapDispatchToProps = {\n  fetchUsersSuccess,\n  fetchStatSuccess,\n  fetchCitiesSuccess\n};\nexport default connect(mapStateToProps, mapDispatchToProps)(Dashboard);","map":{"version":3,"sources":["/Users/johnloberger/Flatiron/code/mod5/frontend/src/components/Dashboard.js"],"names":["React","connect","fetchUsersSuccess","fetchStatSuccess","fetchCitiesSuccess","ClimateMap","cities","climScores","Dashboard","Component","state","climateScores","stations","fetchAllStats","props","stats","map","stat","fetch","lat","lon","then","resp","json","data","console","log","componentDidMount","records","render","mapStateToProps","users","mapDispatchToProps"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,OAAT,QAAwB,aAAxB;AACA,SAASC,iBAAT,QAAkC,iBAAlC;AACA,SAASC,gBAAT,QAAiC,iBAAjC;AACA,SAASC,kBAAT,QAAmC,iBAAnC;AACA,OAAOC,UAAP,MAAuB,cAAvB;AACA,OAAOC,MAAP,MAAmB,eAAnB;AACA,OAAOC,UAAP,MAAuB,mBAAvB;;AAEA,MAAMC,SAAN,SAAwBR,KAAK,CAACS,SAA9B,CAAwC;AAAA;AAAA;AAAA,SAEtCC,KAFsC,GAE9B;AACNC,MAAAA,aAAa,EAAEJ,UADT;AAENK,MAAAA,QAAQ,EAAE;AAFJ,KAF8B;;AAAA,SAkCtCC,aAlCsC,GAkCtB,MAAM;AACpB,WAAKC,KAAL,CAAWC,KAAX,CAAiBC,GAAjB,CAAsBC,IAAD,IAAQ;AAC3BC,QAAAA,KAAK,CAAE,kCAAiCD,IAAI,CAACE,GAAI,IAAGF,IAAI,CAACG,GAAI,kDAAxD,CAAL,CACCC,IADD,CACMC,IAAI,IAAIA,IAAI,CAACC,IAAL,EADd,EAECF,IAFD,CAEMG,IAAI,IAAIC,OAAO,CAACC,GAAR,CAAYF,IAAZ,CAFd;AAGD,OAJD;AAKD,KAxCqC;AAAA;;AAOtCG,EAAAA,iBAAiB,GAAE;AAEfT,IAAAA,KAAK,CAAC,6BAAD,CAAL,CACCG,IADD,CACMC,IAAI,IAAIA,IAAI,CAACC,IAAL,EADd,EAECF,IAFD,CAEMG,IAAI,IAAI;AACZ,WAAKV,KAAL,CAAWZ,iBAAX,CAA6BsB,IAA7B;AACD,KAJD;AAKAN,IAAAA,KAAK,CAAC,+GAAD,CAAL,CACCG,IADD,CACMC,IAAI,IAAIA,IAAI,CAACC,IAAL,EADd,EAECF,IAFD,CAEMT,QAAQ,IAAI;AAChB;AACA;AACA;AACA,WAAKE,KAAL,CAAWX,gBAAX,CAA4BS,QAAQ,CAACY,IAArC;AACD,KAPD;AAQAN,IAAAA,KAAK,CAAC,iLAAD,CAAL,CACCG,IADD,CACMC,IAAI,IAAIA,IAAI,CAACC,IAAL,EADd,EAECF,IAFD,CAEMf,MAAM,IAAI;AACdmB,MAAAA,OAAO,CAACC,GAAR,CAAYpB,MAAM,CAACsB,OAAnB;AACA,WAAKd,KAAL,CAAWV,kBAAX,CAA8BE,MAAM,CAACsB,OAArC;AACD,KALD;AAUH;;AAUDC,EAAAA,MAAM,GAAE;AACN,SAAKhB,aAAL;AACA,wBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAEE,oBAAC,UAAD;AAAY,MAAA,QAAQ,EAAE,KAAKC,KAAL,CAAWC,KAAjC;AAAwC,MAAA,MAAM,EAAE,KAAKD,KAAL,CAAWR,MAA3D;AAAmE,MAAA,aAAa,EAAE,KAAKI,KAAL,CAAWC,aAA7F;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFF,CADF;AAKD;;AAjDqC;;AAoDxC,MAAMmB,eAAe,GAAIpB,KAAD,IAAW;AACjC,SAAO;AACLqB,IAAAA,KAAK,EAAErB,KAAK,CAACqB,KADR;AAELhB,IAAAA,KAAK,EAAEL,KAAK,CAACK,KAFR;AAGLT,IAAAA,MAAM,EAAEI,KAAK,CAACJ;AAHT,GAAP;AAKD,CAND;;AAQA,MAAM0B,kBAAkB,GAAG;AACzB9B,EAAAA,iBADyB;AAEzBC,EAAAA,gBAFyB;AAGzBC,EAAAA;AAHyB,CAA3B;AAMA,eAAeH,OAAO,CAAC6B,eAAD,EAAkBE,kBAAlB,CAAP,CAA6CxB,SAA7C,CAAf","sourcesContent":["import React from 'react';\nimport { connect } from 'react-redux'\nimport { fetchUsersSuccess } from '../actions/user'\nimport { fetchStatSuccess } from '../actions/stat'\nimport { fetchCitiesSuccess } from '../actions/city'\nimport ClimateMap from './ClimateMap'\nimport cities from './cities.json'\nimport climScores from './climScores.json'\n\nclass Dashboard extends React.Component {\n\n  state = {\n    climateScores: climScores,\n    stations: {}\n  }\n  \n  componentDidMount(){\n\n      fetch('http://localhost:3001/users')\n      .then(resp => resp.json())\n      .then(data => {\n        this.props.fetchUsersSuccess(data)\n      })\n      fetch('https://api.waqi.info/map/bounds/?latlng=85,-180,-85.05115,180&token=87b2bba6a5b2e26c577ffc48e297eaed82a8408c')\n      .then(resp => resp.json())\n      .then(stations => {\n        // this.setState({\n        //   stations: stations\n        // })\n        this.props.fetchStatSuccess(stations.data)\n      })\n      fetch('https://public.opendatasoft.com/api/records/1.0/search/?dataset=1000-largest-us-cities-by-population-with-geographic-coordinates&q=&rows=1000&sort=-rank&facet=city&facet=state')\n      .then(resp => resp.json())\n      .then(cities => {\n        console.log(cities.records)\n        this.props.fetchCitiesSuccess(cities.records)\n      })\n\n\n\n       \n  }\n\n  fetchAllStats = () => {\n    this.props.stats.map((stat)=>{\n      fetch(`https://api.waqi.info/feed/geo:${stat.lat};${stat.lon}/?token=87b2bba6a5b2e26c577ffc48e297eaed82a8408c`)\n      .then(resp => resp.json())\n      .then(data => console.log(data))\n    })\n  }\n\n  render(){ \n    this.fetchAllStats()\n    return (\n      <div>\n       \n        <ClimateMap stations={this.props.stats} cities={this.props.cities} climateScores={this.state.climateScores}/>\n      </div>)\n  };\n}\n\nconst mapStateToProps = (state) => {\n  return {\n    users: state.users,\n    stats: state.stats,\n    cities: state.cities,\n  }\n}\n\nconst mapDispatchToProps = {\n  fetchUsersSuccess,\n  fetchStatSuccess,\n  fetchCitiesSuccess\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Dashboard);\n\n\n"]},"metadata":{},"sourceType":"module"}